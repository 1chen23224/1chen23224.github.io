<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>üçì ÂÆµÂ§ú</title>
<style>
  :root{
    --bg1:#fff0f6; --bg2:#fffaf0; --bg3:#f0f7ff;
    --accent:#ff4d88;
  }
  html,body{height:100%; margin:0;}
  body{
    margin:0;
    font-family: "Comic Sans MS","Microsoft JhengHei",sans-serif;
    background: radial-gradient(1200px 600px at 8% 12%, rgba(255,220,235,0.38), transparent 8%),
                radial-gradient(900px 500px at 92% 88%, rgba(220,245,255,0.48), transparent 12%),
                linear-gradient(135deg,var(--bg1),var(--bg2),var(--bg3));
    background-size:300% 300%;
    animation: bgFloat 20s ease-in-out infinite;
    color:#5a2b3a;
    overflow:hidden;
    -webkit-font-smoothing:antialiased;
  }
  @keyframes bgFloat{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

  .wrap{width:100%;max-width:980px;margin:28px auto;text-align:center;position:relative;z-index:40;padding-bottom:120px;}
  h1{margin:0 0 6px;font-size:2rem;background:linear-gradient(90deg,#ff6aa6,#ff8ecb,#ffd9f0);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
  .subtitle{margin-top:6px;color:#9b5074;opacity:0.95;font-size:0.98rem;}

  .scene{position:relative;padding:28px 10px 100px;}
  .cake{
    width:320px; max-width:86%; margin:18px auto; position:relative; cursor:pointer;
    transform-origin:center bottom; transition: transform .18s ease, box-shadow .25s ease; will-change: transform;
    user-select:none;
  }
  .cake::after{content:"";position:absolute;left:50%;bottom:-12px;transform:translateX(-50%);width:70%;height:18px;background:radial-gradient(60% 60% at 50% 40%, rgba(255,200,230,0.35), transparent 55%);filter:blur(10px);z-index:-1}
  .cake.hover{ transform: translateY(-6px) rotateX(6deg) scale(1.02); box-shadow: 0 28px 44px rgba(180,100,150,0.12); }
  .cake.super{ transform: translateY(-16px) rotateX(6deg) scale(1.22); box-shadow: 0 48px 84px rgba(180,100,150,0.16); }

  .glow{ position:absolute; left:50%; top:8px; transform:translateX(-50%); width:320px; height:98px; background:radial-gradient(circle at 50% 10%, rgba(255,220,235,0.95), rgba(200,230,255,0.2) 40%, transparent 60%); border-radius:50%; filter:blur(20px); z-index:30; pointer-events:none; opacity:.9; }

  .ownerBadge{ position:absolute; right:-6px; top:-6px; background:linear-gradient(90deg,#fff,#ffe8f1); border:1px solid rgba(255,120,160,0.22); color:#8f4663; padding:6px 8px; border-radius:12px; font-size:12px; box-shadow:0 6px 14px rgba(200,120,160,0.06); z-index:45; display:none; }

  /* falling strawberry */
  .falling{ position:fixed; top:-160px; width:56px; height:auto; pointer-events:none; z-index:26; transform-origin:center; filter: drop-shadow(0 8px 12px rgba(200,120,150,0.16)); animation: fall linear forwards; will-change: transform, opacity; }
  @keyframes fall{ 0%{ transform: translate3d(0,-0vh,0) rotate(0deg); opacity:1; } 65%{ transform: translate3d(var(--sx,0),70vh,0) rotate(200deg); opacity:1; } 100%{ transform: translate3d(calc(var(--sx,0) - 14px),105vh,0) rotate(360deg); opacity:0.96; } }

  .particle{ position:fixed; pointer-events:none; font-weight:700; z-index:60; animation: particleUp .95s cubic-bezier(.2,.9,.2,1) forwards; text-shadow:0 3px 12px rgba(255,200,220,0.45); }
  @keyframes particleUp{ 0%{ transform: translateY(0) scale(1); opacity:1; } 100%{ transform: translateY(-90px) scale(.6); opacity:0; } }

  .spark{ position:fixed; width:6px; height:6px; border-radius:50%; background:linear-gradient(180deg,#fff,#ffe0f0); opacity:.9; filter: blur(.2px); pointer-events:none; z-index:18; animation: twinkle 2.6s ease-in-out infinite; }
  @keyframes twinkle{ 0%{transform:scale(.7);opacity:.25;} 50%{transform:scale(1.3);opacity:1;} 100%{transform:scale(.8);opacity:.3;} }

  .pill{ position:fixed; left:12px; bottom:14px; background:rgba(255,255,255,0.95); padding:8px 12px; border-radius:999px; box-shadow:0 8px 20px rgba(30,10,20,0.08); font-size:13px; z-index:70; display:none; }

  /* canvas layers */
  #stars, #fireworks { position:fixed; inset:0; pointer-events:none; z-index:10; }
  #fireworks { z-index:120; }

  @media (max-width:520px){
    .cake{ width:220px; }
    .glow{ width:220px; height:72px; top:6px; filter:blur(16px); }
  }
</style>
</head>
<body>
  <div class="wrap">
    <h1>üçì Êæ≥Â§ßÁ¨¨‰∏ÄÂ£´Â§öÂï§Ê¢®ËõãÁ≥ïÔºàÈôêÊôÇÔºâ</h1>
    <div class="subtitle" id="subtitle">ËºïËºïÈªûËõãÁ≥ïÔºåÊúÉÊúâË∂ÖÂèØÊÑõÁöÑÂ∞èÈ©öÂñú ‚ú®</div>

    <div class="scene" id="scene">
      <div class="glow" id="glow" aria-hidden="true"></div>

      <div class="cake" id="cake" role="img" aria-label="ËçâËéìËõãÁ≥ï">
        <!-- Áî® emoji Áï∂ cake iconÔºà‰Ω†ÂèØ‰ª•ÊèõÊàêÂÆåÊï¥ SVGÔºâ -->
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 300">
  <defs>
    <linearGradient id="cakeGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#fce4ec"/>
      <stop offset="100%" style="stop-color:#f8bbd0"/>
    </linearGradient>
    <linearGradient id="creamGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ffffff"/>
      <stop offset="100%" style="stop-color:#fff3e0"/>
    </linearGradient>
    <linearGradient id="strawberryGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ff4d4d"/>
      <stop offset="100%" style="stop-color:#cc0000"/>
    </linearGradient>
    <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
      <feDropShadow dx="3" dy="3" stdDeviation="3" flood-color="#000000" flood-opacity="0.3"/>
    </filter>
  </defs>

  <rect x="50" y="120" width="200" height="120" rx="30" ry="30" fill="url(#cakeGradient)" stroke="#d81b60" stroke-width="3" filter="url(#shadow)"/>
  <ellipse cx="150" cy="120" rx="100" ry="30" fill="url(#creamGradient)" stroke="#d81b60" stroke-width="3" filter="url(#shadow)"/>

  <path d="M50 120 Q70 100 90 120 T130 120 T170 120 T210 120 T250 120" fill="none" stroke="url(#creamGradient)" stroke-width="15" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M50 180 Q70 160 90 180 T130 180 T170 180 T210 180 T250 180" fill="none" stroke="url(#creamGradient)" stroke-width="15" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M50 240 Q70 220 90 240 T130 240 T170 240 T210 240 T250 240" fill="none" stroke="url(#creamGradient)" stroke-width="15" stroke-linecap="round" stroke-linejoin="round"/>

  <g filter="url(#shadow)">
    <circle cx="80" cy="90" r="20" fill="url(#strawberryGradient)" stroke="#880e4f" stroke-width="2"/>
    <circle cx="150" cy="70" r="20" fill="url(#strawberryGradient)" stroke="#880e4f" stroke-width="2"/>
    <circle cx="220" cy="90" r="20" fill="url(#strawberryGradient)" stroke="#880e4f" stroke-width="2"/>
  </g>

  <ellipse cx="75" cy="85" rx="8" ry="12" fill="white" opacity="0.7"/>
  <ellipse cx="145" cy="65" rx="8" ry="12" fill="white" opacity="0.7"/>
  <ellipse cx="215" cy="85" rx="8" ry="12" fill="white" opacity="0.7"/>

  <path d="M70 75 Q75 60 85 75 L70 75 Z" fill="#4caf50" stroke="#2e7d32" stroke-width="1"/>
  <path d="M140 55 Q145 40 155 55 L140 55 Z" fill="#4caf50" stroke="#2e7d32" stroke-width="1"/>
  <path d="M210 75 Q215 60 225 75 L210 75 Z" fill="#4caf50" stroke="#2e7d32" stroke-width="1"/>
</svg>
        <div class="ownerBadge" id="ownerBadge"></div>
      </div>

      <div class="msg" id="msg" style="margin-top:8px;color:#8f476f;font-weight:600;">ËºïÈªûËõãÁ≥ïÔºåÊî∂ÈõÜÈ©öÂñú ‚ú®</div>
    </div>
  </div>

  <!-- canvases -->
  <canvas id="stars"></canvas>
  <canvas id="fireworks"></canvas>

<script>
/* ==========================
   Personalization & lists
   ========================== */
function getToName(){
  try{
    const params = new URLSearchParams(location.search);
    for(const [k,v] of params.entries()){
      if(k.toLowerCase() === 'to') return decodeURIComponent(v);
    }
  }catch(e){}
  return null;
}
const toName = getToName();
const QQ = ["Â•ΩQÔΩû (¬¥‚ñΩÔΩÄ)","Q_Q Â•ΩÂèØÊÑõ","Â•ΩQÂ•ΩÊÉ≥Âí¨‰∏ÄÂè£ÔΩû","Àä·µïÀã Â•ΩÊ≤ªÁôí","ÂìáÔΩûÂ•ΩÂ§¢Âπª o(‚âß‚ñΩ‚â¶)o","Â•ΩÊÉ≥ÂÅ∑ÂêÉ‰∏ÄÂè£ QwQ","Ë∂ÖÂèØÊÑõÔΩû ï‚Ä¢·¥•‚Ä¢ î","Â•ΩÂ∞ëÂ•≥ÂøÉÔΩû","ËêåÂà∞ÂÜíÊ≥°ÔΩû","Â•ΩÊÉ≥‰∏ÄËµ∑ÂêÉüç∞"];
const EMO = ["üçì","‚ú®","üç¨","üå∏","üç™","üç≠"];

/* show ownerBadge/pill if toName present */
if(toName){
  const badge = document.getElementById('ownerBadge');
  badge.textContent = `ÁâπÂà•ÁÇ∫ ${toName} Ê∫ñÂÇô`;
  badge.style.display = 'block';
  document.getElementById('msg').textContent = `ËºïÈªûÊúâÂ∞èÈ©öÂñú ‚ú®`;
}

/* tiny audio priming */
let audioPrimed = false;
function tinyBeep(freq=720,dur=0.045){
  try{
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const o = ctx.createOscillator(); const g = ctx.createGain();
    o.type='sine'; o.frequency.value = freq; g.gain.value = 0.02;
    o.connect(g); g.connect(ctx.destination); o.start();
    setTimeout(()=>{ o.stop(); ctx.close(); }, dur*1000);
  }catch(e){}
}

/* ==========================
   Stars canvas (background)
   ========================== */
const starCanvas = document.getElementById('stars');
const starCtx = starCanvas.getContext('2d');
let SW = innerWidth, SH = innerHeight;
let dpr = Math.max(1, window.devicePixelRatio || 1);

function resizeStars(){
  dpr = Math.max(1, window.devicePixelRatio || 1);
  SW = innerWidth; SH = innerHeight;
  starCanvas.width = SW * dpr; starCanvas.height = SH * dpr;
  starCanvas.style.width = SW + 'px'; starCanvas.style.height = SH + 'px';
  starCtx.setTransform(dpr,0,0,dpr,0,0);
}
resizeStars();
window.addEventListener('resize', resizeStars);

class Star {
  constructor(){
    this.reset();
  }
  reset(){
    this.x = Math.random()*SW;
    this.y = Math.random()*SH;
    this.r = Math.random()*1.6;
    this.baseAlpha = 0.15 + Math.random()*0.85;
    this.alpha = this.baseAlpha;
    this.delta = 0.002 + Math.random()*0.006;
  }
  update(){
    this.alpha += (Math.random()>0.5?1:-1)*this.delta;
    if(this.alpha < 0.05) this.alpha = 0.05;
    if(this.alpha > 1) this.alpha = 1;
  }
  draw(ctx){
    ctx.beginPath();
    ctx.fillStyle = `rgba(255,255,255,${this.alpha})`;
    ctx.arc(this.x, this.y, this.r, 0, 2*Math.PI);
    ctx.fill();
  }
}
let stars = [];
function initStars(n=100){
  stars = [];
  for(let i=0;i<n;i++) stars.push(new Star());
}
initStars(120);

/* meteors */
class Meteor {
  constructor(){
    this.reset();
  }
  reset(){
    this.x = -50 + Math.random()*SW*0.3;
    this.y = Math.random()*SH*0.4;
    this.len = 80 + Math.random()*120;
    this.speed = 8 + Math.random()*6;
    this.alpha = 1;
    this.life = 0;
  }
  update(){
    this.x += this.speed;
    this.y += this.speed*0.45;
    this.alpha -= 0.01;
    if(this.alpha <= 0 || this.x > SW + 100) this.reset();
  }
  draw(ctx){
    const grad = ctx.createLinearGradient(this.x, this.y, this.x - this.len, this.y - this.len);
    grad.addColorStop(0, `rgba(255,255,255,${this.alpha})`);
    grad.addColorStop(1, 'rgba(255,255,255,0)');
    ctx.strokeStyle = grad;
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(this.x, this.y);
    ctx.lineTo(this.x - this.len, this.y - this.len);
    ctx.stroke();
  }
}
let meteors = [new Meteor()];

function animateStars(){
  starCtx.clearRect(0,0,SW,SH);
  for(const s of stars){ s.update(); s.draw(starCtx); }
  // occasional additional small sparkles
  if(Math.random() < 0.0025) meteors.push(new Meteor());
  for(const m of meteors) m.update(), m.draw(starCtx);
  requestAnimationFrame(animateStars);
}
animateStars();

/* ==========================
   Strawberry rain (DOM)
   ========================== */
const strawberrySVG = `<svg viewBox="0 0 50 60" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
  <ellipse cx="25" cy="30" rx="18" ry="22" fill="#ff3b55"/>
  <path d="M25 10 C 18 14, 8 10, 12 6 C 6 8, 6 14, 14 12 C 10 18, 18 20, 25 14 C 32 20, 40 18, 36 12 C 44 14, 44 8, 38 6 C 42 10, 32 14, 25 10 Z" fill="#29b84a"/>
  <ellipse cx="17" cy="18" rx="3" ry="5" fill="#fff" opacity="0.22"/>
</svg>`;

const activeStraw = new Set();
function spawnStrawberry(){
  if(activeStraw.size > 60) return;
  const el = document.createElement('div');
  el.className = 'falling';
  el.innerHTML = strawberrySVG;
  const leftVW = (Math.random()*86 + 6);
  el.style.left = leftVW + 'vw';
  const scale = (Math.random()*0.6) + 0.7;
  el.style.width = (48*scale) + 'px';
  const sx = (Math.random()*80 - 40) + 'px';
  el.style.setProperty('--sx', sx);
  const dur = (2.6 + Math.random()*2.4);
  el.style.animationDuration = dur + 's';
  document.body.appendChild(el);
  activeStraw.add(el);
  // glow tail
  const tail = document.createElement('div');
  tail.style.position='absolute'; tail.style.left='-6px'; tail.style.top='12px'; tail.style.width='36px'; tail.style.height='10px';
  tail.style.background='radial-gradient(ellipse at 20% 50%, rgba(255,200,220,0.75), transparent 40%)'; tail.style.filter='blur(6px)'; tail.style.transform='rotate(-8deg)';
  if(el.firstElementChild) el.firstElementChild.appendChild(tail);
  el.addEventListener('animationend', ()=>{
    el.style.transition='transform .25s ease, opacity .28s ease'; el.style.transform += ' translateY(8px) scale(.92)'; el.style.opacity='0.94';
    if(Math.random() < 0.30){
      const h = document.createElement('div');
      h.className='particle'; h.textContent='üíñ'; const rect = el.getBoundingClientRect();
      h.style.left = (rect.left + rect.width/2) + 'px';
      h.style.top  = (window.innerHeight - 78) + 'px';
      h.style.fontSize='20px';
      document.body.appendChild(h);
      setTimeout(()=>h.remove(),1100);
      if(audioPrimed) tinyBeep(520,0.05);
    } else if(Math.random() < 0.28){
      const s = document.createElement('div'); s.className='spark';
      const rect = el.getBoundingClientRect();
      s.style.left = (rect.left + rect.width/2) + 'px';
      s.style.top  = (window.innerHeight - 78) + 'px';
      s.style.width = s.style.height = (4 + Math.random()*5) + 'px';
      document.body.appendChild(s);
      setTimeout(()=>s.remove(), 900 + Math.random()*900);
    }
    setTimeout(()=>{ el.remove(); activeStraw.delete(el); }, 420);
  }, {once:true});
}
const rainTimer = setInterval(()=>{ if(Math.random() < 0.95) spawnStrawberry(); }, 380);

/* ==========================
   Canvas Fireworks (gradient + halo)
   ========================== */
const fwCanvas = document.getElementById('fireworks');
const fwCtx = fwCanvas.getContext('2d', { alpha: true });
let W = innerWidth, H = innerHeight;

function resizeFW(){
  dpr = Math.max(1, window.devicePixelRatio || 1);
  W = innerWidth; H = innerHeight;
  fwCanvas.width = W * dpr; fwCanvas.height = H * dpr;
  fwCanvas.style.width = W + 'px'; fwCanvas.style.height = H + 'px';
  fwCtx.setTransform(dpr,0,0,dpr,0,0);
}
resizeFW();
window.addEventListener('resize', ()=>{
  resizeFW();
  resizeStars();
});

class FWParticle {
  constructor(x,y,c1,c2){
    this.x = x; this.y = y;
    const a = Math.random()*2*Math.PI;
    const s = 2 + Math.random()*4;
    this.vx = Math.cos(a)*s;
    this.vy = Math.sin(a)*s;
    this.life = 0;
    this.maxLife = 50 + Math.random()*50;
    this.size = 1 + Math.random()*2;
    this.c1 = c1; this.c2 = c2;
  }
  lerpColor(a,b,t){
    const ah = parseInt(a.replace('#','0x')), bh = parseInt(b.replace('#','0x'));
    const ar = ah>>16, ag = ah>>8&0xff, ab = ah&0xff;
    const br = bh>>16, bg = bh>>8&0xff, bb = bh&0xff;
    const rr = ar + (br-ar)*t, rg = ag + (bg-ag)*t, rb = ab + (bb-ab)*t;
    return `rgb(${rr|0},${rg|0},${rb|0})`;
  }
  update(){ this.x += this.vx; this.y += this.vy; this.vy += 0.03; this.life++; }
  draw(ctx){
    const t = this.life / this.maxLife;
    ctx.globalCompositeOperation = 'lighter';
    ctx.globalAlpha = Math.max(0, 1 - t);
    ctx.fillStyle = this.lerpColor(this.c1,this.c2,t);
    ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI*2); ctx.fill();
  }
}

class Firework {
  constructor(x,y){
    this.x = x; this.y = y;
    this.particles = [];
    const palettes = [
      ['#ff99cc','#ffeeaa'],
      ['#99ccff','#cc99ff'],
      ['#ffee88','#ff99cc'],
      ['#ffffff','#ffcc88']
    ];
    const pal = palettes[Math.floor(Math.random()*palettes.length)];
    for(let i=0;i<90;i++) this.particles.push(new FWParticle(x,y,pal[0],pal[1]));
  }
  draw(ctx){
    // halo
    const grd = ctx.createRadialGradient(this.x,this.y,0,this.x,this.y,90);
    grd.addColorStop(0,'rgba(255,255,255,0.5)');
    grd.addColorStop(0.6,'rgba(255,220,240,0.12)');
    grd.addColorStop(1,'rgba(255,255,255,0)');
    ctx.globalAlpha = 1;
    ctx.fillStyle = grd;
    ctx.fillRect(this.x-90,this.y-90,180,180);

    // particles
    for(let i=this.particles.length-1;i>=0;i--){
      const p = this.particles[i];
      p.update(); p.draw(ctx);
      if(p.life > p.maxLife) this.particles.splice(i,1);
    }
  }
}

let fireworks = [];
function launchFirework(x,y){
  fireworks.push(new Firework(x,y));
}
function animateFW(){
  fwCtx.clearRect(0,0,W,H);
  for(let i=fireworks.length-1;i>=0;i--){
    fireworks[i].draw(fwCtx);
    if(fireworks[i].particles.length === 0) fireworks.splice(i,1);
  }
  requestAnimationFrame(animateFW);
}
animateFW();

/* ==========================
   Particles (DOM) + cake interact
   ========================== */
const cake = document.getElementById('cake');
let clickCount = 0, superMode = false;

function makeParticleAt(x,y){
  const el = document.createElement('div');
  el.className = 'particle';
  if(toName && Math.random() < 0.48){
    el.style.fontSize = (15 + Math.random()*8) + 'px';
  } else if(Math.random() < 0.6){
    el.textContent = QQ[Math.floor(Math.random()*QQ.length)];
    el.style.fontSize = (14 + Math.random()*10) + 'px';
  } else {
    el.textContent = EMO[Math.floor(Math.random()*EMO.length)];
    el.style.fontSize = (18 + Math.random()*10) + 'px';
  }
  el.style.left = (x + (Math.random()*56 - 28)) + 'px';
  el.style.top  = (y + (Math.random()*36 - 18)) + 'px';
  document.body.appendChild(el);
  setTimeout(()=>el.remove(), 1100);
}

function spawnStrawberryBurst(n=2){
  for(let i=0;i<n;i++) setTimeout(spawnStrawberry, i*90);
}

function onCakeClick(ev){
  if(!audioPrimed){ audioPrimed = true; tinyBeep(720,0.045); }
  cake.classList.add('hover'); setTimeout(()=>cake.classList.remove('hover'),160);
  const x = ev.clientX || W/2; const y = ev.clientY || H/2;
  for(let i=0;i<6;i++) setTimeout(()=> makeParticleAt(x,y), i*60);
  spawnStrawberryBurst(2);
  launchFirework(x,y);
  if(audioPrimed) tinyBeep(720 - Math.random()*120, 0.04);
  clickCount++;
  if(clickCount >= 10 && !superMode){ triggerSuperMode(); }
}

cake.addEventListener('click', onCakeClick);
cake.addEventListener('mouseenter', ()=> cake.classList.add('hover'));
cake.addEventListener('mouseleave', ()=> cake.classList.remove('hover'));
cake.setAttribute('tabindex','0');
cake.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') onCakeClick({ clientX: cake.getBoundingClientRect().left + cake.clientWidth/2, clientY: cake.getBoundingClientRect().top + cake.clientHeight/2 }); });

function triggerSuperMode(){
  superMode = true; cake.classList.add('super');
  const rect = cake.getBoundingClientRect();
  for(let i=0;i<8;i++){
    setTimeout(()=>{ launchFirework(rect.left + rect.width/2 + (Math.random()*120-60), rect.top + rect.height/2 + (Math.random()*60-30)); }, i*220);
  }
  setTimeout(()=>{ cake.classList.remove('super'); superMode=false; clickCount=0; }, 4200);
}

/* mobile double tap quick burst */
let lastTap = 0;
document.addEventListener('touchstart', (ev)=>{ const now = Date.now(); if(now - lastTap < 300) spawnStrawberryBurst(6); lastTap = now; });

/* safety purge */
setInterval(()=>{
  if(activeStraw.size > 100){
    const arr = Array.from(activeStraw).slice(0,20);
    arr.forEach(e => { e.remove(); activeStraw.delete(e); });
  }
}, 2500);

/* expose helpers for console debug */
window._cakeHelpers = { spawnStrawberry, spawnStrawberryBurst, launchFirework, triggerSuperMode };

</script>
</body>
</html>
